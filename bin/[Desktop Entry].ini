[Desktop Entry]
Type=Application
Name=Monitor: Nur Terra (DP-1)
Exec=/bin/bash -lc '~/.local/bin/monitors-mode.sh single terra'
Icon=video-display
Categories=Settings;Utility;
Terminal=false
Comment=Enables Terra (DP-1) only. Disables DP-2/3/4.

# create target directories
mkdir -p ~/github_repos/monitor-profiles/bin
mkdir -p ~/.local/bin
mkdir -p ~/.local/share/applications

# move/merge project if it's in a common subfolder (adjust source if different)
mv -T ~/github_repos/TimInTech/monitor-profiles ~/github_repos/monitor-profiles || true

# copy controller to user-local bin and set executable
cp -f ~/github_repos/monitor-profiles/bin/monitors-mode.sh ~/.local/bin/monitors-mode.sh
chmod +x ~/.local/bin/monitors-mode.sh

# install wrapper scripts into the repo bin (ensure executable)
cp -f ~/github_repos/monitor-profiles/bin/one-terra.sh ~/github_repos/monitor-profiles/bin/one-terra.sh
cp -f ~/github_repos/monitor-profiles/bin/triple-aoc.sh ~/github_repos/monitor-profiles/bin/triple-aoc.sh
chmod +x ~/github_repos/monitor-profiles/bin/one-terra.sh
chmod +x ~/github_repos/monitor-profiles/bin/triple-aoc.sh

# install desktop files for the user
install -Dm644 ~/github_repos/monitor-profiles/applications/monitor-single-terra.desktop ~/.local/share/applications/monitor-single-terra.desktop
install -Dm644 ~/github_repos/monitor-profiles/applications/monitor-triple-aoc.desktop ~/.local/share/applications/monitor-triple-aoc.desktop

# refresh KDE application database
kbuildsycoca6

# Validation commands
bash -n ~/.local/bin/monitors-mode.sh
env KS_BIN=echo ~/.local/bin/monitors-mode.sh single terra
env KS_BIN=echo ~/.local/bin/monitors-mode.sh triple --primary DP-3